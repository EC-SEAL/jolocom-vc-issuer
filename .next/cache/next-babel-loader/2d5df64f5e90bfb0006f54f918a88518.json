{"ast":null,"code":"var __jsx = React.createElement;\nimport React from \"react\";\nimport Link from \"next/link\";\nimport { connect } from \"react-redux\"; // get our fontawesome imports\n\nimport { faArrowCircleRight, faArrowCircleLeft } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { loginClicked, setUserAttributeSelection, setSessionData, setServerSessionId, setEndpoint, increaseCardIndex, decreaseCardIndex, setBaseUrl } from \"../store\";\nimport Layout from \"../components/Layout\";\nimport { Button, Row, Col, Card } from \"react-bootstrap\";\n\nconst jwt = require(\"jsonwebtoken\");\n\nimport { getPath } from \"../helpers/pathHelper\";\nimport isMobile from \"../helpers/isMobile\";\n\nclass Index extends React.Component {\n  constructor(props) {\n    super(props);\n    this.dispatch = props.dispatch;\n    this.clickMe = this.clickMe.bind(this);\n    this.increaseCardIndex = this.increaseCardIndex.bind(this);\n    this.decreaseCardIndex = this.decreaseCardIndex.bind(this);\n    this.isFetching = props.isFetching;\n    this.sessionData = props.sessionData; // this.userEidas = props.userEidas;\n    // this.userEduGain = props.userEduGain;\n\n    this.userSelection = props.userSelection;\n  }\n\n  static async getInitialProps({\n    reduxStore,\n    req\n  }) {\n    const serverIsFetching = reduxStore.getState().fetching; // console.log(`serverIsFetching ${serverIsFetching}`);\n\n    let userSessionData;\n    let serverSessionId;\n    let endpoint;\n    let baseUrl;\n\n    if (true) {\n      userSessionData = req.session.userData; // the user attributes\n\n      serverSessionId = req.session.id; // the sessionId that exists on the backend server\n      // this is stored on the redux store to use it on the client side components\n\n      endpoint = req.session.endpoint;\n      reduxStore.dispatch(setServerSessionId(serverSessionId));\n      reduxStore.dispatch(setEndpoint(endpoint));\n      baseUrl = req.session.baseUrl ? `/${req.session.baseUrl}/` : \"\"; // console.log(`index.js setting baseurl to: ${baseUrl}`);\n\n      reduxStore.dispatch(setBaseUrl(baseUrl));\n    } else {\n      if (reduxStore.getState().sessionData) {\n        // console.log(`user data is defined already ${sessionData}`);\n        userSessionData = reduxStore.getState().sessionData;\n      } else {\n        console.log(`no server session data found`);\n      }\n    }\n\n    reduxStore.dispatch(setSessionData(userSessionData)); //add the userEidas data to the reduxstore to be able to get it from other componets as well\n\n    reduxStore.dispatch(setUserAttributeSelection([])); //returned value here is getting mered with the mapstatetoprops\n    // mapstatetoprops overrides these values if they match\n\n    return {\n      isFetching: serverIsFetching,\n      sessionData: userSessionData,\n      userSelection: userSessionData ? userSessionData.userSelection : null,\n      qrData: reduxStore.getState().qrData,\n      baseurl: reduxStore.getState().baseUrl,\n      serverSessionId: reduxStore.getState().serverSessionId\n    };\n  }\n\n  componentDidMount() {\n    const {\n      dispatch,\n      sessionData\n    } = this.props;\n  }\n\n  componentWillUnmount() {}\n\n  clickMe() {\n    this.dispatch(loginClicked());\n  }\n\n  increaseCardIndex() {\n    this.props.incCardIndex();\n  }\n\n  decreaseCardIndex() {\n    this.props.decCardIndex();\n  }\n\n  render() {\n    let cards = [__jsx(Card, {\n      style: {\n        minHeight: \"47rem\"\n      }\n    }, __jsx(Card.Header, null, \"Issue an isStudent Verifiable Credential\"), __jsx(Card.Img, {\n      variant: \"top\",\n      src: getPath(\"student.png\")\n    }), __jsx(Card.Body, null, __jsx(Card.Title, null, \"Click Next to generate VC proving that your are a Student\"), __jsx(Card.Subtitle, {\n      className: \"mb-2 text-muted\"\n    }, \"Available for all EU citizens\"), __jsx(Card.Text, null, \"You will be issued a Verifiable Credential (VC) proving that you are a student. To do so you will need to authenticate over eIDAS and through an Academic Attribute Provider. \", __jsx(\"br\", null), \"SEAL link those attributes together.\"), __jsx(Card.Link, {\n      href: \"#\"\n    }, __jsx(Link, {\n      as: getPath(\"issue-is-student\"),\n      href: \"issue-is-student\"\n    }, __jsx(Button, {\n      variant: \"primary\"\n    }, \"Next\"))))), __jsx(Card, {\n      style: {\n        minHeight: \"47rem\"\n      }\n    }, __jsx(Card.Header, null, \"Issue an eIDAS eID Verifiable Credential\"), __jsx(Card.Img, {\n      style: {\n        minHeight: \"18rem\"\n      },\n      variant: \"top\",\n      src: getPath(\"eID.png\")\n    }), __jsx(Card.Body, null, __jsx(Card.Title, null, \"Click Next to generate an eIDAS eID Verifiable Credential\"), __jsx(Card.Subtitle, {\n      className: \"mb-2 text-muted\"\n    }, \"Available for all EU citizens\"), __jsx(Card.Text, null, \"You will be required to authenticate over eIDAS in order to import your Personal Identnification information. \", __jsx(\"br\", null), \"SEAL will issue a Verifiable Credential based on your national eID.\"), __jsx(Card.Link, {\n      href: \"#\"\n    }, __jsx(Link // as={getPath(\"issue-eidas\")}\n    , {\n      href: `${this.props.baseUrl}vc/issue/eidas`\n    }, __jsx(Button, {\n      variant: \"primary\"\n    }, \"Next\"))))), __jsx(Card, {\n      style: {\n        minHeight: \"47rem\"\n      }\n    }, __jsx(Card.Header, null, \"Issue GR Ministry of Education based Verifiable Credential\"), __jsx(Card.Img, {\n      style: {\n        minHeight: \"18rem\"\n      },\n      variant: \"top\",\n      src: getPath(\"minedu.jpg\")\n    }), __jsx(Card.Body, null, __jsx(Card.Title, null, \"Click Next to generate a Verifiable Credential GR MinEdu AcademicId.\"), __jsx(Card.Subtitle, {\n      className: \"mb-2 text-muted\"\n    }, \"Available for Greek Students and Academic Staff only\"), __jsx(Card.Text, null, \"You will be required to authenticate using your University's Infrastructure. \", __jsx(\"br\", null), \"SEAL will issue a Verifiable Credential your Academic Attributes.\"), __jsx(Card.Link, {\n      href: \"#\"\n    }, __jsx(Link, {\n      href: `${this.props.baseUrl}issue-gr-academic-id`\n    }, __jsx(Button, {\n      variant: \"primary\"\n    }, \"Next\"))))), __jsx(Card, {\n      style: {\n        minHeight: \"47rem\"\n      }\n    }, __jsx(Card.Header, null, \"Issue an eduGAIN Verifiable Credential\"), __jsx(Card.Img, {\n      style: {\n        minHeight: \"18rem\"\n      },\n      variant: \"top\",\n      src: getPath(\"edugain.png\")\n    }), __jsx(Card.Body, null, __jsx(Card.Title, null, \"Click Next to generate an eduGAIN eID Verifiable Credential\"), __jsx(Card.Subtitle, {\n      className: \"mb-2 text-muted\"\n    }, \"Available for all Students with Universities part of the eduGAIN Federation\"), __jsx(Card.Text, null, \"You will be required to authenticate using your University's Infrastructure. \", __jsx(\"br\", null), \"SEAL will issue a Verifiable Credential your Academic Attributes.\"), __jsx(Card.Link, {\n      href: \"#\"\n    }, \"Next\"))), __jsx(Card, {\n      style: {\n        minHeight: \"47rem\"\n      }\n    }, __jsx(Card.Header, null, \"Build Your Own Verifiable Credential\"), __jsx(Card.Img, {\n      style: {\n        minHeight: \"18rem\"\n      },\n      variant: \"top\",\n      src: getPath(\"puzzle.png\")\n    }), __jsx(Card.Body, null, __jsx(Card.Title, null, \"Click Next select which attributes to include in a Credential.\"), __jsx(Card.Subtitle, {\n      className: \"mb-2 text-muted\"\n    }, \"Available for all EU citizens\"), __jsx(Card.Text, null, \"Connect with any of the available data sources, and then select which attributes to include in a new Verifiable Credential.\"), __jsx(Card.Link, null, __jsx(Link, {\n      as: getPath(\"attribute-selector\"),\n      href: \"attribute-selector\"\n    }, __jsx(Button, {\n      variant: \"primary\"\n    }, \"Next\")))))];\n    let isRightEnabled = cards.length / 3 > this.props.cardIndex;\n    let isLeftEnabled = this.props.cardIndex > 1;\n\n    let mobileCards = __jsx(Layout, null, __jsx(Row, {\n      style: {\n        marginTop: \"3rem\"\n      }\n    }, __jsx(Col, {\n      xs: 1,\n      style: {\n        marginTop: \"auto\",\n        marginBottom: \"auto\"\n      }\n    }), __jsx(Col, {\n      xs: 10,\n      className: \"container\"\n    }, __jsx(Row, null, cards.map((card, indx) => {\n      return __jsx(Col, {\n        key: indx,\n        sm: 4,\n        xs: 12\n      }, card);\n    }))), __jsx(Col, {\n      xs: 1,\n      style: {\n        marginTop: \"auto\",\n        marginBottom: \"auto\"\n      }\n    })));\n\n    let desktopCards = __jsx(Layout, null, __jsx(Row, {\n      style: {\n        marginTop: \"3rem\"\n      }\n    }, __jsx(Col, {\n      xs: 1,\n      style: {\n        marginTop: \"auto\",\n        marginBottom: \"auto\"\n      }\n    }, __jsx(Button, {\n      onClick: this.decreaseCardIndex,\n      variant: \"primary\",\n      disabled: !isLeftEnabled\n    }, __jsx(FontAwesomeIcon, {\n      icon: faArrowCircleLeft\n    }))), __jsx(Col, {\n      xs: 10,\n      className: \"container\"\n    }, __jsx(Row, null, cards.filter((card, index) => {\n      return index / 3 >= this.props.cardIndex - 1 && index / 3 < this.props.cardIndex;\n    }).map((card, indx) => {\n      return __jsx(Col, {\n        key: indx,\n        sm: 4,\n        xs: 12\n      }, card);\n    }))), __jsx(Col, {\n      xs: 1,\n      style: {\n        marginTop: \"auto\",\n        marginBottom: \"auto\"\n      }\n    }, __jsx(Button, {\n      onClick: this.increaseCardIndex,\n      variant: \"primary\",\n      disabled: !isRightEnabled\n    }, __jsx(FontAwesomeIcon, {\n      icon: faArrowCircleRight\n    })))));\n\n    return isMobile() ? mobileCards : desktopCards;\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  console.log(\"index.js mapping state to props\");\n  console.log(state);\n  return {\n    isFetching: state.fetching,\n    qrData: state.qrData,\n    // userEidas: state.userEidas, // the eIDAS attributes of the user\n    // userEduGain: state.userEduGain, // the eduGain attributes of the user\n    sessionData: state.sessionData,\n    userSelection: state.userSelection,\n    // the attributes selected by the user to be included in a VC,\n    cardIndex: state.cardIndex,\n    baseUrl: state.baseUrl\n  };\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    incCardIndex: () => {\n      dispatch(increaseCardIndex());\n    },\n    decCardIndex: () => {\n      dispatch(decreaseCardIndex());\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Index);","map":{"version":3,"sources":["/home/ni/code/js/jolocom-seal-issuer/pages/index.js"],"names":["React","Link","connect","faArrowCircleRight","faArrowCircleLeft","FontAwesomeIcon","loginClicked","setUserAttributeSelection","setSessionData","setServerSessionId","setEndpoint","increaseCardIndex","decreaseCardIndex","setBaseUrl","Layout","Button","Row","Col","Card","jwt","require","getPath","isMobile","Index","Component","constructor","props","dispatch","clickMe","bind","isFetching","sessionData","userSelection","getInitialProps","reduxStore","req","serverIsFetching","getState","fetching","userSessionData","serverSessionId","endpoint","baseUrl","session","userData","id","console","log","qrData","baseurl","componentDidMount","componentWillUnmount","incCardIndex","decCardIndex","render","cards","minHeight","isRightEnabled","length","cardIndex","isLeftEnabled","mobileCards","marginTop","marginBottom","map","card","indx","desktopCards","filter","index","mapStateToProps","state","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Link from \"next/link\";\nimport { connect } from \"react-redux\";\n// get our fontawesome imports\nimport {\n  faArrowCircleRight,\n  faArrowCircleLeft\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  loginClicked,\n  setUserAttributeSelection,\n  setSessionData,\n  setServerSessionId,\n  setEndpoint,\n  increaseCardIndex,\n  decreaseCardIndex,\n  setBaseUrl\n} from \"../store\";\nimport Layout from \"../components/Layout\";\nimport { Button, Row, Col, Card } from \"react-bootstrap\";\nconst jwt = require(\"jsonwebtoken\");\nimport { getPath } from \"../helpers/pathHelper\";\nimport isMobile from \"../helpers/isMobile\";\n\nclass Index extends React.Component {\n  constructor(props) {\n    super(props);\n    this.dispatch = props.dispatch;\n    this.clickMe = this.clickMe.bind(this);\n    this.increaseCardIndex = this.increaseCardIndex.bind(this);\n    this.decreaseCardIndex = this.decreaseCardIndex.bind(this);\n\n    this.isFetching = props.isFetching;\n    this.sessionData = props.sessionData;\n    // this.userEidas = props.userEidas;\n    // this.userEduGain = props.userEduGain;\n    this.userSelection = props.userSelection;\n  }\n\n  static async getInitialProps({ reduxStore, req }) {\n    const serverIsFetching = reduxStore.getState().fetching;\n    // console.log(`serverIsFetching ${serverIsFetching}`);\n    let userSessionData;\n    let serverSessionId;\n    let endpoint;\n    let baseUrl;\n\n    if (typeof window === \"undefined\") {\n      userSessionData = req.session.userData; // the user attributes\n      serverSessionId = req.session.id; // the sessionId that exists on the backend server\n      // this is stored on the redux store to use it on the client side components\n      endpoint = req.session.endpoint;\n\n      reduxStore.dispatch(setServerSessionId(serverSessionId));\n      reduxStore.dispatch(setEndpoint(endpoint));\n      baseUrl = req.session.baseUrl ? `/${req.session.baseUrl}/` : \"\";\n      // console.log(`index.js setting baseurl to: ${baseUrl}`);\n      reduxStore.dispatch(setBaseUrl(baseUrl));\n    } else {\n      if (reduxStore.getState().sessionData) {\n        // console.log(`user data is defined already ${sessionData}`);\n        userSessionData = reduxStore.getState().sessionData;\n      } else {\n        console.log(`no server session data found`);\n      }\n    }\n\n    reduxStore.dispatch(setSessionData(userSessionData)); //add the userEidas data to the reduxstore to be able to get it from other componets as well\n    reduxStore.dispatch(setUserAttributeSelection([]));\n    //returned value here is getting mered with the mapstatetoprops\n    // mapstatetoprops overrides these values if they match\n    return {\n      isFetching: serverIsFetching,\n      sessionData: userSessionData,\n      userSelection: userSessionData?userSessionData.userSelection:null,\n      qrData: reduxStore.getState().qrData,\n      baseurl: reduxStore.getState().baseUrl,\n      serverSessionId: reduxStore.getState().serverSessionId,\n      \n    };\n  }\n\n  componentDidMount() {\n    const { dispatch, sessionData } = this.props;\n  }\n\n  componentWillUnmount() {}\n\n  clickMe() {\n    this.dispatch(loginClicked());\n  }\n\n  increaseCardIndex() {\n    this.props.incCardIndex();\n  }\n  decreaseCardIndex() {\n    this.props.decCardIndex();\n  }\n\n  render() {\n    let cards = [\n      <Card style={{ minHeight: \"47rem\" }}>\n        <Card.Header>Issue an isStudent Verifiable Credential</Card.Header>\n        <Card.Img variant=\"top\" src={getPath(\"student.png\")} />\n        <Card.Body>\n          <Card.Title>\n            Click Next to generate VC proving that your are a Student\n          </Card.Title>\n          <Card.Subtitle className=\"mb-2 text-muted\">\n            Available for all EU citizens\n          </Card.Subtitle>\n          <Card.Text>\n            You will be issued a Verifiable Credential (VC) proving that you are\n            a student. To do so you will need to authenticate over eIDAS and\n            through an Academic Attribute Provider. <br />\n            SEAL link those attributes together.\n          </Card.Text>\n          <Card.Link href=\"#\">\n            <Link as={getPath(\"issue-is-student\")} href=\"issue-is-student\">\n              <Button variant=\"primary\">Next</Button>\n            </Link>\n          </Card.Link>\n        </Card.Body>\n      </Card>,\n      <Card style={{ minHeight: \"47rem\" }}>\n        <Card.Header>Issue an eIDAS eID Verifiable Credential</Card.Header>\n        <Card.Img  style={{ minHeight: \"18rem\" }}variant=\"top\" src={getPath(\"eID.png\")} />\n        <Card.Body>\n          <Card.Title>\n            Click Next to generate an eIDAS eID Verifiable Credential\n          </Card.Title>\n          <Card.Subtitle className=\"mb-2 text-muted\">\n            Available for all EU citizens\n          </Card.Subtitle>\n          <Card.Text>\n            You will be required to authenticate over eIDAS in order to import\n            your Personal Identnification information. <br />\n            SEAL will issue a Verifiable Credential based on your national eID.\n          </Card.Text>\n          <Card.Link href=\"#\">\n            <Link\n              // as={getPath(\"issue-eidas\")}\n              href={`${this.props.baseUrl}vc/issue/eidas`}\n            >\n              <Button variant=\"primary\">Next</Button>\n            </Link>\n          </Card.Link>\n        </Card.Body>\n      </Card>,\n\n      <Card style={{ minHeight: \"47rem\" }}>\n        <Card.Header>\n          Issue GR Ministry of Education based Verifiable Credential\n        </Card.Header>\n        <Card.Img style={{ minHeight: \"18rem\" }} variant=\"top\" src={getPath(\"minedu.jpg\")} />\n        <Card.Body>\n          <Card.Title>\n            Click Next to generate a Verifiable Credential GR MinEdu AcademicId.\n          </Card.Title>\n          <Card.Subtitle className=\"mb-2 text-muted\">\n            Available for Greek Students and Academic Staff only\n          </Card.Subtitle>\n          <Card.Text>\n            You will be required to authenticate using your University's\n            Infrastructure. <br />\n            SEAL will issue a Verifiable Credential your Academic Attributes.\n          </Card.Text>\n          <Card.Link href=\"#\">\n            <Link href={`${this.props.baseUrl}issue-gr-academic-id`}>\n              <Button variant=\"primary\">Next</Button>\n            </Link>\n          </Card.Link>\n        </Card.Body>\n      </Card>,\n\n      <Card style={{ minHeight: \"47rem\" }}>\n        <Card.Header>Issue an eduGAIN Verifiable Credential</Card.Header>\n        <Card.Img style={{ minHeight: \"18rem\" }} variant=\"top\" src={getPath(\"edugain.png\")} />\n        <Card.Body>\n          <Card.Title>\n            Click Next to generate an eduGAIN eID Verifiable Credential\n          </Card.Title>\n\n          <Card.Subtitle className=\"mb-2 text-muted\">\n            Available for all Students with Universities part of the eduGAIN\n            Federation\n          </Card.Subtitle>\n          <Card.Text>\n            You will be required to authenticate using your University's\n            Infrastructure. <br />\n            SEAL will issue a Verifiable Credential your Academic Attributes.\n          </Card.Text>\n          <Card.Link href=\"#\">Next</Card.Link>\n        </Card.Body>\n      </Card>,\n\n      <Card style={{ minHeight: \"47rem\" }}>\n        <Card.Header>Build Your Own Verifiable Credential</Card.Header>\n        <Card.Img style={{ minHeight: \"18rem\" }} variant=\"top\" src={getPath(\"puzzle.png\")} />\n        <Card.Body>\n          <Card.Title>\n            Click Next select which attributes to include in a Credential.\n          </Card.Title>\n          <Card.Subtitle className=\"mb-2 text-muted\">\n            Available for all EU citizens\n          </Card.Subtitle>\n          <Card.Text>\n            Connect with any of the available data sources, and then select\n            which attributes to include in a new Verifiable Credential.\n          </Card.Text>\n          <Card.Link>\n            <Link as={getPath(\"attribute-selector\")} href=\"attribute-selector\">\n              <Button variant=\"primary\">Next</Button>\n            </Link>\n          </Card.Link>\n        </Card.Body>\n      </Card>\n    ];\n\n    let isRightEnabled = cards.length / 3 > this.props.cardIndex;\n\n    let isLeftEnabled = this.props.cardIndex > 1;\n\n    let mobileCards = (\n      <Layout>\n        <Row style={{ marginTop: \"3rem\" }}>\n          <Col xs={1} style={{ marginTop: \"auto\", marginBottom: \"auto\" }}></Col>\n\n          <Col xs={10} className={\"container\"}>\n            <Row>\n              {cards.map((card, indx) => {\n                return (\n                  <Col key={indx} sm={4} xs={12}>\n                    {card}\n                  </Col>\n                );\n              })}\n            </Row>\n          </Col>\n          <Col xs={1} style={{ marginTop: \"auto\", marginBottom: \"auto\" }}></Col>\n        </Row>\n      </Layout>\n    );\n\n    let desktopCards = (\n      <Layout>\n        <Row style={{ marginTop: \"3rem\" }}>\n          <Col xs={1} style={{ marginTop: \"auto\", marginBottom: \"auto\" }}>\n            <Button\n              onClick={this.decreaseCardIndex}\n              variant=\"primary\"\n              disabled={!isLeftEnabled}\n            >\n              <FontAwesomeIcon icon={faArrowCircleLeft} />\n            </Button>\n          </Col>\n\n          <Col xs={10} className={\"container\"}>\n            <Row>\n              {cards\n                .filter((card, index) => {\n                  return (\n                    index / 3 >= this.props.cardIndex - 1 &&\n                    index / 3 < this.props.cardIndex\n                  );\n                })\n                .map((card, indx) => {\n                  return (\n                    <Col key={indx} sm={4} xs={12}>\n                      {card}\n                    </Col>\n                  );\n                })}\n            </Row>\n          </Col>\n\n          <Col xs={1} style={{ marginTop: \"auto\", marginBottom: \"auto\" }}>\n            <Button\n              onClick={this.increaseCardIndex}\n              variant=\"primary\"\n              disabled={!isRightEnabled}\n            >\n              <FontAwesomeIcon icon={faArrowCircleRight} />\n            </Button>\n          </Col>\n        </Row>\n      </Layout>\n    );\n\n    return isMobile() ? mobileCards : desktopCards;\n  }\n}\n\nfunction mapStateToProps(state) {\n  console.log(\"index.js mapping state to props\");\n  console.log(state);\n  return {\n    isFetching: state.fetching,\n    qrData: state.qrData,\n    // userEidas: state.userEidas, // the eIDAS attributes of the user\n    // userEduGain: state.userEduGain, // the eduGain attributes of the user\n    sessionData: state.sessionData,\n    userSelection: state.userSelection, // the attributes selected by the user to be included in a VC,\n    cardIndex: state.cardIndex,\n    baseUrl: state.baseUrl\n  };\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    incCardIndex: () => {\n      dispatch(increaseCardIndex());\n    },\n    decCardIndex: () => {\n      dispatch(decreaseCardIndex());\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Index);\n"]},"metadata":{},"sourceType":"module"}